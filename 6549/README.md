# 히스토그램 최대 직사각형 (BOJ 6549) 사고 정리

## 1️⃣ 풀이2 (O(N²)) : 기준 원소 중심 탐색

### 풀이2 개요
왼쪽에서 오른쪽으로 각 원소를 순회하면서,  
각 원소를 **직사각형의 높이로 고정**하고  
해당 높이가 유지될 수 있는 **왼쪽/오른쪽 최대 범위**를 탐색하여  
만들 수 있는 직사각형 넓이 중 최댓값을 구한다.

---

## 풀이2의 계산 요소

각 원소 `i`에 대해 다음 3가지 계산이 필요하다.

1. **높이 확정**
   - 현재 원소의 높이는 즉시 확정된다.

2. **왼쪽 너비 확정**
   - 현재 원소에서 왼쪽으로 이동하며  
     처음으로 현재 높이보다 낮은 원소를 만나는 지점까지 탐색

3. **오른쪽 너비 확정**
   - 현재 원소에서 오른쪽으로 이동하며  
     처음으로 현재 높이보다 낮은 원소를 만나는 지점까지 탐색

👉 이 과정에서 같은 높이 비교가 반복되므로 전체 시간복잡도는 O(N²)

---

## 2️⃣ 풀이2를 데이터 관점에서 재정의

### 풀이2에 필요한 데이터 요소

각 원소에 대해 실제로 필요한 데이터는 다음 세 가지다.

1. **높이**
   - 현재 원소의 높이

2. **왼쪽 경계**
   - 이 높이가 유지될 수 있는 가장 왼쪽 인덱스

3. **오른쪽 경계**
   - 이 높이가 깨지는 최초의 오른쪽 인덱스

---

### 풀이2의 데이터 확정 순서

1. 현재 원소의 **높이와 인덱스는 즉시 확정**
2. **왼쪽 경계**는 이전 원소들의 정보로 확정
3. **오른쪽 경계**는 이후 등장하는 원소에 의해 확정

👉 높이/왼쪽 경계는 현재 시점,  
👉 오른쪽 경계는 미래 정보가 필요

---

## 3️⃣ 데이터 확정 순서 병합의 핵심 아이디어

### ① 현재 원소 + 왼쪽 경계 확정

- 이전 원소들의 높이를 정렬된 상태로 저장
- 현재 원소보다 높은 이전 원소들을 탐색하여
  - 해당 원소들의 왼쪽 경계를 확정
- 현재 원소보다 높은 이전 원소들은 제거 가능

---

### ② 현재 원소 + 오른쪽 경계 확정

- 오른쪽 경계 계산은 미룸
- 현재 원소 등장 시,
  - 이전 원소들에게는 현재 원소가 다음 원소
- 현재 원소보다 높은 이전 원소들에 대해
  - 미뤄졌던 오른쪽 경계를 확정
- 확정된 원소들은 제거 가능

---

### ③ 공통 결론

- 현재 원소보다 높은 이전 원소들은
  - 양쪽 경계가 모두 확정
  - 이후 계산 불필요 → 제거

---

## 4️⃣ 풀이3 (O(N)) : 단조 스택

### 풀이3 개요

1. 현재 원소의 **높이와 시작 인덱스** 저장
2. 이전 원소 중 현재 원소보다 높은 원소들에 대해
   - 오른쪽 경계 확정
   - 넓이 계산
   - 왼쪽 경계를 현재 원소에 전달
   - 제거
3. 현재 원소를 스택에 저장
4. 순회 종료 후 남은 원소는 오른쪽 경계를 `N`으로 확정

👉 각 원소는 push 1번, pop 1번 → **O(N)**

---

## 5️⃣ 한 줄 요약

> 이 문제는 각 높이에 대해  
> **왼쪽 경계는 현재 시점에서**,  
> **오른쪽 경계는 더 낮은 값이 등장하는 시점에서** 확정되며,  
> 경계가 확정된 높이는 제거함으로써  
> 중복 계산을 제거한 문제다.
